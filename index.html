<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" type="text/css" href="assets/styles/style.css">
    <!-- <script src="bower_components/underscore/underscore.js"></script>
    <script src="bower_components/jquery/jquery.min.js"></script>
    <script src="bower_components/backbone/backbone.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script>
    <script src='app/models/Stack.js'></script>
    <script src='app/models/Blank.js'></script>
    <script src='app/collections/Stacks.js'></script>
    <script src='app/models/App.js'></script>
    <script src='app/views/StacksView.js'></script>
    <script src='app/views/StackView.js'></script>
    <script src='app/views/BoardView.js'></script>
    <script src='app/views/RowView.js'></script>
    <script src='app/views/AppView.js'></script>
  </head>

  <body>
    <div id="main-header">
      <h1>N-Queens Javscript Recursive Solution Visualizer</h1>
      <div>Press enter or click anywhere to advance to the next stack. <a href=".">Click here to start the recursion visualizer over.</a> Read about this algorithm at <a href="http://liujoycec.github.io/2015/09/20/n_queens_symmetry/">LiuJoyceC.github.io</a></div>
    </div>

    <div id="app">

      <table><tr>
    <!-- Column that is 40% of window width -->
      <td class="forty-col">
        <div id="chessboards">
          <span class="board">
            <table id="primary-board"></table>
          </span><!--
          --><span class="board">
            <table id="mirror-board"></table>
          </span>
        </div>
        <div id="message"></div>



        <div id="code-window">
          <pre><code>
CountNQueensSolutions = function(n) {
  var count = 0;
  var done = Math.pow(2,n) - 1;
  var excl = Math.pow(2, Math.floor(n/2)) - 1;

  var innerRecurse = function(ld, col, rd, ex1, ex2) {

    if (col === done) {
      count++;
      return;
    }

    var poss = ~(ld | rd | col | ex1) & done;

    while (poss) {
      var bit = poss & -poss;
      poss = poss^bit;
      innerRecurse((ld|bit)>>1,col|bit,(rd|bit)<<1,ex2,0);
      x2 = 0;
    }
  };

  innerRecurse(0, 0, 0, excl, n%2 ? excl : 0);
  return count*2;
};
          </code></pre>
        </div>
      </td><!--



      Column that is 60% of window width
      --><td class="sixty-col">
        <div id="outervars"></div>
        <div id="stacks"><table><tr id="stacks-scaffold"></tr></table></div>
      </td>

      </tr></table>

    </div>

    <!-- Hidden from view. Used to preload queen image because
    it loads slowly the first time -->
    <div id="preload-image"></div>

  </body>

  <script>
    $(document).ready(function() {
      var n = parseInt(prompt('Choose an N between 2 and 6'));
      $('html').on('keydown', function(e) {
        if (e.which === 13) { // press enter instead of click
          $('body').trigger('click');
        }
      });
      new AppView({ model: new App({ n: n }) });
    });
  </script>

</html>